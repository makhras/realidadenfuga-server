(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"47ef":function(t,e,a){},"7b24":function(t,e,a){"use strict";var r=a("47ef"),o=a.n(r);o.a},bf07:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{position:"relative"}},[a("transition",{attrs:{appear:"","enter-active-class":"animated fadeInDown","leave-active-class":"animated fadeOutUp"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.topbar,expression:"topbar"}],staticClass:"toolbarContainer"},[a("div",{class:t.dark?"toolbarWrapper dark":"toolbarWrapper"},[a("div",{style:t.dark?"color: white":"color: black",attrs:{id:"toolbar"}},[a("q-btn",{staticClass:"ql-scriptScene",attrs:{round:"",flat:"",dense:"",icon:"mdi-movie-open",size:"xs"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",delay:500}},[a("strong",[t._v("ESCENA")]),a("br"),a("code",[t._v("Script")])])],1),a("q-btn",{staticClass:"ql-scriptAction",attrs:{round:"",flat:"",dense:"",icon:"mdi-run",size:"xs"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",delay:500}},[a("strong",[t._v("ACCIÓN")]),a("br"),a("code",[t._v("Script")])])],1),a("q-btn",{staticClass:"ql-scriptCharacter",attrs:{round:"",flat:"",dense:"",icon:"mdi-account",size:"xs"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",delay:500}},[a("strong",[t._v("PERSONAJE")]),a("br"),a("code",[t._v("Script")])])],1),a("q-btn",{staticClass:"ql-scriptDialogue",attrs:{round:"",flat:"",dense:"",icon:"mdi-chat",size:"xs"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",delay:500}},[a("strong",[t._v("DIÁLOGO")]),a("br"),a("code",[t._v("Script")])])],1),a("q-btn",{staticClass:"ql-scriptParenthetical",attrs:{round:"",flat:"",dense:"",icon:"mdi-code-parentheses",size:"xs"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",delay:500}},[a("strong",[t._v("PARÉNTESIS")]),a("br"),a("code",[t._v("Script")])])],1),a("q-btn",{staticClass:"ql-scriptShot",attrs:{round:"",flat:"",dense:"",icon:"mdi-camera-image",size:"xs"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",delay:500}},[a("strong",[t._v("TOMA")]),a("br"),a("code",[t._v("Script")])])],1),a("q-btn",{staticClass:"ql-scriptTransition",attrs:{round:"",flat:"",dense:"",icon:"mdi-arrow-right-box",size:"xs"}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",delay:500}},[a("strong",[t._v("TRANSICIÓN")]),a("br"),a("code",[t._v("Script")])])],1),a("q-btn",{attrs:{round:"",flat:"",dense:"",icon:"mdi-print",size:"xs"},on:{click:t.printQuill}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",delay:500}},[a("strong",[t._v("TRANSICIÓN")]),a("br"),a("code",[t._v("Script")])])],1)],1)])])])],1),a("q-scroll-area",{staticClass:"scrollArea",on:{scroll:t.scrolled}},[a("div",{staticClass:"editPage",style:t.dark?"background:#1f1f1f":"background:#c3c3c3"},[a("div",{class:t.dark?"editor dark":"editor",attrs:{id:t.drawerOpen?"paned":"unpaned"}},[a("div",{staticClass:"screenplay"},[a("div",{style:t.dark?"color:white":"color:black",attrs:{id:"editor"}})])])])])],1)},o=[],i=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("278c")),n=a.n(i),s=a("9523"),c=a.n(s),l=a("9339"),u=a.n(l),d=(a("48d1"),a("5fad")),p=a.n(d),h=a("b4d6"),m=a.n(h),f=(a("4a41"),a("8096"),a("825c")),v=a.n(f),b=a("bc3a"),g=a.n(b),y=a("d096"),q=a("2f62"),S=(a("6b54"),a("2397"),a("7f7f"),a("970b")),k=a.n(S),N=a("5bc3"),O=a.n(N),w=a("8962"),T=a.n(w),P=a("ed6d"),E=a.n(P),C=a("6b58"),x=a.n(C),D=a("36c6"),A=a.n(D);function I(t){var e=_();return function(){var a,r=A()(t);if(e){var o=A()(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return x()(this,a)}}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var R=u.a.import("blots/block"),L=(u.a.import("blots/embed"),function(t){E()(a,t);var e=I(a);function a(){return k()(this,a),e.apply(this,arguments)}return O()(a,null,[{key:"create",value:function(t){var e=T()(A()(a),"create",this).call(this,t);return e.dataset.type="script",e}},{key:"formats",value:function(t){return{type:t.dataset.type}}}]),a}(R));L.blotName="scriptScene",L.className="scriptScene",L.tagName="p",u.a.register({"formats/scriptScene":L});var j=function(t){E()(a,t);var e=I(a);function a(){return k()(this,a),e.apply(this,arguments)}return O()(a,null,[{key:"create",value:function(t){var e=T()(A()(a),"create",this).call(this,t);return e.dataset.type="script",e}},{key:"formats",value:function(t){return{type:t.dataset.type}}}]),a}(R);j.blotName="scriptAction",j.className="scriptAction",j.tagName="p",u.a.register("formats/scriptAction",j);var H=function(t){E()(a,t);var e=I(a);function a(){return k()(this,a),e.apply(this,arguments)}return O()(a,null,[{key:"create",value:function(t){var e=T()(A()(a),"create",this).call(this,t);return e.dataset.type="script",e}},{key:"formats",value:function(t){return{type:t.dataset.type}}}]),a}(R);H.blotName="scriptCharacter",H.className="scriptCharacter",H.tagName="p",u.a.register("formats/scriptCharacter",H);var F=function(t){E()(a,t);var e=I(a);function a(){return k()(this,a),e.apply(this,arguments)}return O()(a,null,[{key:"create",value:function(t){var e=T()(A()(a),"create",this).call(this,t);return e.dataset.type="script",t.time&&(e.dataset.time=t.time),t.name&&(e.dataset.name=t.name),e}},{key:"formats",value:function(t){return{name:t.dataset.name,time:t.dataset.time}}},{key:"value",value:function(t){var e=t.dataset,a=e.name,r=e.time;return{name:a,time:r}}}]),a}(R);F.blotName="scriptDialogue",F.className="scriptDialogue",F.tagName="div",u.a.register({"formats/scriptDialogue":F});var K=function(t){E()(a,t);var e=I(a);function a(){return k()(this,a),e.apply(this,arguments)}return O()(a,null,[{key:"create",value:function(t){var e=T()(A()(a),"create",this).call(this,t);return e.dataset.type="script",t.time&&(e.dataset.time=t.time),t.name&&(e.dataset.name=t.name),e}},{key:"formats",value:function(t){return{name:t.dataset.name,time:t.dataset.time}}},{key:"value",value:function(t){var e=t.dataset,a=e.name,r=e.time;return{name:a,time:r}}}]),a}(R);K.blotName="scriptShot",K.className="scriptShot",K.tagName="div",u.a.register({"formats/scriptShot":K});var Q=function(t){E()(a,t);var e=I(a);function a(){return k()(this,a),e.apply(this,arguments)}return O()(a,null,[{key:"create",value:function(t){var e=T()(A()(a),"create",this).call(this,t);return e.dataset.type="script",e}},{key:"formats",value:function(t){return{type:t.dataset.type}}}]),a}(R);Q.blotName="scriptTransition",Q.className="scriptTransition",Q.tagName="p",u.a.register("formats/script",Q);var z,M=function(t){E()(a,t);var e=I(a);function a(){return k()(this,a),e.apply(this,arguments)}return O()(a,null,[{key:"create",value:function(t){var e=T()(A()(a),"create",this).call(this,t);return e.dataset.type="script",e}},{key:"formats",value:function(t){return{type:t.dataset.type}}}]),a}(R);function B(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function G(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?B(Object(a),!0).forEach((function(e){c()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}M.blotName="scriptParenthetical",M.className="scriptParenthetical",M.tagName="p",u.a.register("formats/parenthetical",M),console.log("BLOOD!"),v.a.types.register(m.a.type),u.a.register("modules/cursors",p.a);var J={name:"Screenplay",data:function(){return{quill:null,lastScrollPosition:null,editorOptions:{modules:{toolbar:{container:"#toolbar"},cursors:!0,keyboard:{bindings:{tab:{key:9,handler:this.tab},save:{key:"s",shortKey:!0,handler:this.saveChanges},editMessage:{key:32,shortKey:!0,handler:this.openEditMsgPrompt},altShiftLeft:{key:37,altKey:!0,shiftKey:!0,handler:this.formatReceiver},altShiftRight:{key:39,altKey:!0,shiftKey:!0,handler:this.formatSender},altShiftUp:{key:38,altKey:!0,shiftKey:!0,handler:this.formatHeader},altShiftDown:{key:40,altKey:!0,shiftKey:!0,handler:this.formatParagraph}}},history:{maxStack:500,userOnly:!0},clipboard:{matchVisual:!1}},debug:"info",placeholder:"Escribe aquí",theme:"snow"},doc:null,connection:null}},mounted:function(){this.connect()},computed:G({drawerOpen:{get:function(){return this.drawer},set:function(t){this.setDrawer(t)}}},Object(q["c"])(["dark","user","drawer","topbar"])),methods:G({connect:function(){var t=this,e=this,a="192.168.1.3:8083";g.a.get("https://realidadenfuga.herokuapp.com/guion").then((function(r){console.log("FETCH REPONSE: ",r);var o=new y["a"]("ws://"+a);t.connection=new v.a.Connection(o),window.disconnect=function(){this.connection.close()},window.connect=function(){var t=new y["a"]("wss://mentemedia-backend.herokuapp.com");this.connection.bindToSocket(t)},t.doc=t.connection.get("temporada1","episodio1"),console.log("Connection: ",t.connection),console.log("Doc: ",t.doc),t.doc.subscribe((function(t){if(t)throw t;e.quill=new u.a("#editor",e.editorOptions),e.quill.setContents(e.doc.data),console.log("QUILL SET CONTENTS: ",e.doc.data),e.quill.on("text-change",(function(t,a,r){"user"===r?e.doc.submitOp(t,{source:e.quill}):"api"===r&&console.log("DELta: ",t)})),e.doc.on("op",(function(t,a){a!==e.quill&&(console.log("OP: ",t),e.quill.updateContents(t))}))}))})).catch((function(t){console.log("%cAXIOS ERROR","color:red",t)}))},scrolled:function(t){var e,a=this;e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame((function(){t.verticalPosition>a.lastScrollPosition?(console.log("DOWN"),a.setTopbar(!1)):(console.log("UP"),a.setTopbar(!0)),a.lastScrollPosition=t.verticalPosition}))},updateCursor:function(t){t.cursor.moveCursor(this.user.uid,t.range),console.log("cursssor",t)},printQuill:function(){var t=JSON.stringify(this.quill.getContents());console.log("%cSAVED: ","color:green",t),console.log("%cOPS: ","color:green",JSON.parse(t).ops),this.getEpisodeArray()},tab:function(t){console.log("PRESSED TAB: ",t);var e=this.quill.getLine(t.index);switch(e[0].domNode.className){case"chatReceiver":this.quill.format("chatDate",!0);break;case"articleHeader":this.quill.format("articleDate",!0);break;case"articleDate":this.quill.format("articleParagraph",!0);break;case"articleParagraph":this.quill.format("articleHeader",!0);break;default:this.quill.format("articleHeader",!0);break}},enter:function(){var t=this.quill.getSelection()||this.selection,e=this.quill.getLine(t.index),a=n()(e,2),r=a[0],o=a[1];console.log("LINE: ",r),console.log("OFFSET",o),console.log("LINE CACHE LENGTH: ",r.cache.length),z=r.domNode.className,0===o?1===r.cache.length?"picture"===z?(console.log("%c IMAGE BLOT ","color: orange"),this.quill.insertText(t,"\n"),this.quill.removeFormat(t)):(console.log("%c EMPTY ","color: red"),this.quill.removeFormat(t),this.quill.insertText(t,"\n"),this.lastType="Text"):(console.log("%c NOT EMPTY","color: green"),this.quill.insertText(t,"\n"),this.quill.removeFormat(t)):(console.log("%c NOT BEGINNING","color: red"),console.log("%cLAST LINE: ","color: orange;",z),"articleHeader"===z?(this.quill.insertText(t,"\n"),this.quill.format("articleDate",!0),this.lastType="articleHeader"):"articleDate"===z?(this.quill.insertText(t,"\n"),this.quill.format("articleParagraph",!0),this.lastType="articleParagraph"):(console.log("%c NEW LINE ","color: orange"),this.quill.insertText(t,"\n")))},formatHeader:function(){this.quill.format("articleHeader",!0)},formatParagraph:function(){this.quill.format("articleParagraph",!0)},clearFormat:function(){var t=this.selection,e=this.quill.getLine(t.index);this.quill.removeFormat(t.index,e[0].cache.length),this.lastType="Text"}},Object(q["b"])(["setDrawer","setTopbar"]))},U=J,W=(a("7b24"),a("2877")),V=a("eebe"),Y=a.n(V),X=a("65c6"),$=a("9c40"),Z=a("05c0"),tt=a("2c91"),et=a("4983"),at=a("0016"),rt=a("d66b"),ot=Object(W["a"])(U,r,o,!1,null,null,null);e["default"]=ot.exports;Y()(ot,"components",{QToolbar:X["a"],QBtn:$["a"],QTooltip:Z["a"],QSpace:tt["a"],QScrollArea:et["a"],QIcon:at["a"],QEditor:rt["a"]})}}]);